# Phase 1.1: Project Folder Structure (Bulletproof React Architecture)

## Overview
Complete folder structure for the React Native workout tracking application following [Bulletproof React](https://github.com/alan2207/bulletproof-react) patterns.

## Architecture Philosophy

**Feature-based organization**: Code organized by features (what it does), not file types (what it is).

- **Colocation**: Keep related code close together
- **Clear boundaries**: Each feature is self-contained with its own components, hooks, and API
- **Shared code in lib/**: Common utilities, database, and helpers live outside features
- **Existing structure preserved**: Uses top-level `components/`, `assets/`, and `types.ts`

## Folder Tree

```
simple-workout-tracker/
├── src/
│   ├── features/                     # Feature modules (self-contained)
│   │   ├── workouts/                 # Active workout feature
│   │   │   ├── routes/
│   │   │   │   ├── ActiveWorkout.tsx
│   │   │   │   ├── ExerciseDetail.tsx
│   │   │   │   ├── StartWorkout.tsx
│   │   │   │   └── WorkoutSummary.tsx
│   │   │   ├── components/
│   │   │   │   ├── RestTimerModal.tsx
│   │   │   │   ├── ExerciseCard.tsx
│   │   │   │   ├── SetRow.tsx
│   │   │   │   └── WorkoutTimer.tsx
│   │   │   ├── api/
│   │   │   │   └── workoutService.ts
│   │   │   └── hooks/
│   │   │       ├── useWorkout.ts
│   │   │       └── useTimer.ts
│   │   │
│   │   ├── templates/                # Template management feature
│   │   │   ├── routes/
│   │   │   │   ├── TemplateList.tsx
│   │   │   │   └── TemplateBuilder.tsx
│   │   │   ├── components/
│   │   │   │   ├── TemplateCard.tsx
│   │   │   │   └── ExercisePickerModal.tsx
│   │   │   └── api/
│   │   │       └── templateService.ts
│   │   │
│   │   ├── history/                  # Workout history feature
│   │   │   ├── routes/
│   │   │   │   ├── History.tsx
│   │   │   │   └── WorkoutDetail.tsx
│   │   │   ├── components/
│   │   │   │   └── WorkoutHistoryCard.tsx
│   │   │   └── api/
│   │   │       └── historyService.ts
│   │   │
│   │   ├── analytics/                # Analytics feature (extended)
│   │   │   └── routes/
│   │   │       └── Analytics.tsx
│   │   │
│   │   └── settings/                 # Settings feature
│   │       └── routes/
│   │           └── Settings.tsx
│   │
│   ├── routes/                       # Top-level routes and navigation
│   │   ├── index.tsx                 # Root navigator
│   │   └── home.tsx                  # Home screen
│   │
│   ├── lib/                          # Shared libraries and utilities
│   │   ├── db/                       # Database layer
│   │   │   ├── index.ts              # DB initialization
│   │   │   ├── schema.ts             # Table schemas
│   │   │   └── migrations.ts         # Migration logic
│   │   └── utils/                    # Utility functions
│   │       ├── formatters.ts
│   │       ├── calculations.ts
│   │       └── validators.ts
│   │
│   └── stores/                       # Global state management
│       ├── workoutStore.ts           # Active workout state
│       ├── settingsStore.ts          # App settings
│       └── timerStore.ts             # Timer state
│
├── components/                       # Shared UI components (EXISTING)
│   ├── common/
│   ├── ui/
│   ├── themed-text.tsx
│   └── themed-view.tsx
│
├── assets/                           # Static assets (EXISTING)
│   ├── images/
│   └── fonts/
│
├── types.ts                          # Global TypeScript types (EXISTING)
│
├── project_plan/                     # Planning documents
│   ├── 0.2-screens-and-navigation.md
│   ├── 0.3-mvp-vs-extended-features.md
│   └── 1.1-folder-structure.md
│
├── app.json                          # Expo config
├── package.json                      # Dependencies
└── tsconfig.json                     # TypeScript config
```

## Feature Module Structure

Each feature follows the same internal structure:

```
features/[feature-name]/
├── routes/           # Screen components for this feature
├── components/       # Feature-specific components (not shared)
├── api/             # Business logic and data operations
└── hooks/           # Feature-specific custom hooks
```

### Why this structure?
- **Colocation**: Everything related to a feature lives together
- **Easy to find**: Want to modify workouts? Go to `features/workouts/`
- **Easy to delete**: Remove a feature by deleting its folder
- **Clear dependencies**: Features can import from `lib/`, `stores/`, and shared `components/`
- **No cross-feature imports**: Features never import from each other

## File Descriptions

### Features (`src/features/`)

#### `workouts/` - Active Workout Feature
Handles the core workout session flow.

**Routes (Screens)**:
- `ActiveWorkout.tsx` - Main workout interface with exercise list
- `ExerciseDetail.tsx` - Input sets/reps/weight for an exercise
- `StartWorkout.tsx` - Preview before starting workout
- `WorkoutSummary.tsx` - Summary after completing workout

**Components**:
- `RestTimerModal.tsx` - Countdown rest timer overlay
- `ExerciseCard.tsx` - Exercise display in workout list
- `SetRow.tsx` - Individual set input/display
- `WorkoutTimer.tsx` - Elapsed workout time display

**API**:
- `workoutService.ts` - Workout CRUD, start/end session, save sets

**Hooks**:
- `useWorkout.ts` - Active workout state management
- `useTimer.ts` - Workout timer and rest timer logic

---

#### `templates/` - Template Management Feature
Create and manage workout templates.

**Routes**:
- `TemplateList.tsx` - List all templates
- `TemplateBuilder.tsx` - Create/edit templates

**Components**:
- `TemplateCard.tsx` - Template display card
- `ExercisePickerModal.tsx` - Select exercises for template

**API**:
- `templateService.ts` - Template CRUD operations

---

#### `history/` - Workout History Feature
View past workouts.

**Routes**:
- `History.tsx` - List of all completed workouts
- `WorkoutDetail.tsx` - View single workout (read-only)

**Components**:
- `WorkoutHistoryCard.tsx` - Past workout display card

**API**:
- `historyService.ts` - Query workout history, aggregations

---

#### `analytics/` - Analytics Feature (Extended)
Charts and statistics (Phase 6).

**Routes**:
- `Analytics.tsx` - Dashboard with charts

---

#### `settings/` - Settings Feature
App preferences.

**Routes**:
- `Settings.tsx` - Settings screen

---

### Routes (`src/routes/`)
Top-level navigation and routing.

- `index.tsx` - Root navigator (bottom tabs)
- `home.tsx` - Home screen (quick actions, recent templates)

---

### Lib (`src/lib/`)
Shared code that doesn't belong to a specific feature.

#### `db/` - Database Layer
- `index.ts` - SQLite connection and initialization
- `schema.ts` - Table definitions (templates, workouts, exercises, sets)
- `migrations.ts` - Database version management

#### `utils/` - Utility Functions
- `formatters.ts` - Format dates, weights, durations for display
- `calculations.ts` - Calculate volume, 1RM estimates
- `validators.ts` - Input validation helpers

---

### Stores (`src/stores/`)
Global state management (Zustand or similar).

- `workoutStore.ts` - Active workout session state
- `settingsStore.ts` - User preferences (weight unit, rest time)
- `timerStore.ts` - Rest timer and workout timer state

---

### Existing Top-Level Folders

#### `components/` (EXISTING)
Shared UI components used across features.
- Common buttons, inputs, cards
- Themed components
- UI primitives

#### `assets/` (EXISTING)
Static assets like images, fonts, icons.

#### `types.ts` (EXISTING)
Global TypeScript interfaces:
- `WorkoutTemplate`, `ExerciseTemplate`
- `WorkoutSession`, `Exercise`, `WorkoutSet`
- `PRRecord`, `UserSettings`
- `SyncQueueItem`, `VolumeDataPoint`

---

## Architecture Principles

### 1. Feature-First Organization
Code is organized by **what it does** (features), not **what it is** (file types).

**❌ Traditional approach** (bad):
```
screens/
  WorkoutScreen.tsx
  TemplateScreen.tsx
components/
  WorkoutTimer.tsx
  TemplateCard.tsx
services/
  workoutService.ts
  templateService.ts
```

**✅ Bulletproof React approach** (good):
```
features/
  workouts/
    routes/ActiveWorkout.tsx
    components/WorkoutTimer.tsx
    api/workoutService.ts
  templates/
    routes/TemplateList.tsx
    components/TemplateCard.tsx
    api/templateService.ts
```

### 2. Import Rules

**Features can import from**:
- ✅ Their own files
- ✅ `lib/` (shared utilities, database)
- ✅ `stores/` (global state)
- ✅ Top-level `components/` (shared UI)
- ✅ Top-level `types.ts` (global types)
- ❌ **NEVER** from other features

**Example**:
```typescript
// ✅ GOOD - workout feature importing from lib
import { formatDuration } from '@/lib/utils/formatters';
import { useWorkoutStore } from '@/stores/workoutStore';
import { Button } from '@/components/common/Button';

// ❌ BAD - workout feature importing from templates feature
import { TemplateCard } from '@/features/templates/components/TemplateCard';
```

### 3. Data Flow

```
Route (Screen)
  ↓
Hook (feature-specific)
  ↓
Store (global state) or API (business logic)
  ↓
lib/db (database operations)
  ↓
SQLite
```

### 4. Component Hierarchy

**Shared components** → Top-level `components/` folder
**Feature-specific components** → `features/[feature]/components/`

**Rule**: If a component is used by 2+ features → move to top-level `components/`

---

## Comparison with Bulletproof React

| Bulletproof React | This Project |
|-------------------|--------------|
| `src/features/` | ✅ `src/features/` |
| `src/components/` | ✅ Top-level `components/` |
| `src/lib/` | ✅ `src/lib/` |
| `src/stores/` | ✅ `src/stores/` |
| `src/routes/` | ✅ `src/routes/` |
| `src/types/` | ✅ Top-level `types.ts` |
| `src/utils/` | ✅ `src/lib/utils/` |
| `src/config/` | ⚠️ Use feature-level config or `lib/` |

**Key Adaptations**:
- Using top-level `types.ts` (your existing file) instead of `src/types/`
- Using top-level `components/` and `assets/` (your existing folders)
- Database in `lib/db/` instead of separate `database/` folder
- Preserves your working React Native/Expo boilerplate

---

## Benefits of This Structure

1. **Clear feature boundaries** - Easy to understand what code belongs to what feature
2. **Scalable** - Add new features without cluttering existing ones
3. **Maintainable** - Related code lives together
4. **Easy onboarding** - New developers can find code quickly
5. **Delete with confidence** - Remove a feature by deleting its folder
6. **Works with existing code** - Respects your working boilerplate
7. **No cross-contamination** - Features can't accidentally depend on each other

---

## Next Steps (Phase 1.2+)

1. Set up React Navigation in `src/routes/`
2. Create SQLite schema in `src/lib/db/schema.ts`
3. Implement database migrations in `src/lib/db/migrations.ts`
4. Build shared UI components in top-level `components/`
5. Implement feature modules one by one (workouts → templates → history)
6. Set up global state in `src/stores/`

---

## Notes

- All placeholder files created with comments indicating their purpose
- Structure supports MVP features (Phases 1-4) and future extensions
- Follows Bulletproof React patterns while preserving your existing setup
- Clear separation between features, shared code, and global state
- **No conflicts** with existing `components/`, `assets/`, or `types.ts`
- **No duplicate files** - removed conflicting `index.js` and `src/App.tsx`
